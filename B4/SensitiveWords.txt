db.SensitiveWords.insertOne({
    word: "cá»©t"
});


function sanitizeMessage(message) {
    const sensitiveWords = db.SensitiveWords.find().map(doc => doc.word);
    let sanitizedMessage = message;

    sensitiveWords.forEach(word => {
        const regex = new RegExp(word, 'gi');
        sanitizedMessage = sanitizedMessage.replace(regex, "***");
    });

    return sanitizedMessage;
}



db.CustomerStatistic.find().forEach(function(doc) {
    const sanitizedMessage = sanitizeMessage(doc.Message);
    db.CustomerStatistic.update(
        { _id: doc._id },
        { $set: { SanitizedMessage: sanitizedMessage } }
    );
});